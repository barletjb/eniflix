{% extends 'base.html.twig' %}

{% block title %}ENIFlix - {{ serie.name }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/detail.css') }}">
{% endblock %}

{% block body %}
    <main class="serie-background" style="--backdrop-url: url('{{ asset('uploads/backdrops/' ~ serie.backdrop) }}')">
        <div class="serie-card">
            <h2>{{ serie.name }}</h2>
            <p class="genre">Genre : {{ serie.genre }}</p>
            <p>{{ serie.overview }}</p>

            {% if serie.seasons is defined and serie.seasons|length > 0 %}
                <h3 class="uk-heading-line uk-text-center"><span>Saisons</span></h3>

                <ul class="uk-accordion uk-accordion-flush" uk-accordion>
                    {% for season in serie.seasons %}
                        <li>
                            <a class="uk-accordion-title" href="#">
                                Saison {{ season.number }}
                                {% if season.firstAirDate is not null %}
                                    <span class="uk-text-meta">({{ season.firstAirDate|date('Y') }})</span>
                                {% endif %}
                            </a>
                            <div class="uk-accordion-content">
                                {% if season.overview %}
                                    <p>{{ season.overview }}</p>
                                {% else %}
                                    <p><em>Aucun résumé disponible.</em></p>
                                {% endif %}
                                {% if season.episodes is defined %}
                                    <p class="uk-text-meta">
                                        {{ season.episodes|length }} épisode{{ season.episodes|length > 1 ? 's' : '' }}
                                    </p>
                                {% endif %}
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}



            <div class="uk-margin-top">
                <a href="{{ path('serie_update', { id: serie.id }) }}" class="btn btn-primary">Editer</a>
                &nbsp;
                <a href="{{ path('season_create', { id: serie.id }) }}" class="btn btn-primary">New Season</a>
                &nbsp;
                <a href="{{ path('serie_delete', { id : serie.id, token : csrf_token('delete'~serie.id)}) }}"
                   class="btn btn-danger"
                   onclick="return confirm('Etes vous sûr de vouloir supprimer cette série ??')">Supprimer</a>


            </div>
        </div>
    </main>
{% endblock %}
